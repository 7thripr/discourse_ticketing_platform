{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport LoginView from '../views/LoginView.vue';\nimport RegisterView from '../views/RegisterView.vue';\nimport store from '../store';\nimport * as common from \"../assets/common.js\";\nimport StudentHome from '../views/StudentHome.vue';\nimport StudentCreateTicket from '../views/StudentCreateTicket.vue';\nimport StudentMyTickets from '../views/StudentMyTickets.vue';\nimport CommonFAQs from '../views/CommonFAQs.vue';\nimport SupportHome from '../views/SupportHome.vue';\nimport SupportMyTickets from '../views/SupportMyTickets.vue';\nimport AdminHome from '../views/AdminHome.vue';\nimport AdminCreateFAQ from '../views/AdminCreateFAQ.vue';\nimport AdminValidateUsers from '../views/AdminValidateUsers.vue';\nimport AppHomeView from '../views/AppHomeView.vue';\nimport UserProfile from '../views/UserProfile.vue';\nVue.use(VueRouter);\nconst routes = [{\n  path: '/',\n  alias: '/home',\n  name: 'AppHomeView',\n  component: AppHomeView\n}, {\n  path: '/login',\n  name: 'LoginView',\n  component: LoginView\n}, {\n  path: '/register',\n  name: 'RegisterView',\n  component: RegisterView\n}, {\n  path: '/student-home',\n  name: 'StudentHome',\n  component: StudentHome\n}, {\n  path: '/student-create-ticket',\n  name: 'StudentCreateTicket',\n  component: StudentCreateTicket\n}, {\n  path: '/student-my-tickets',\n  name: 'StudentMyTickets',\n  component: StudentMyTickets\n}, {\n  path: '/common-faqs',\n  name: 'CommonFAQs',\n  component: CommonFAQs\n}, {\n  path: '/user-profile',\n  name: 'UserProfile',\n  component: UserProfile\n}, {\n  path: '/support-home',\n  name: 'SupportHome',\n  component: SupportHome\n}, {\n  path: '/support-my-tickets',\n  name: 'SupportMyTickets',\n  component: SupportMyTickets\n}, {\n  path: '/admin-home',\n  name: 'AdminHome',\n  component: AdminHome\n}, {\n  path: '/admin-validate-users',\n  name: 'AdminValidateUsers',\n  component: AdminValidateUsers\n}, {\n  path: '/admin-create-faq',\n  name: 'AdminCreateFAQ',\n  component: AdminCreateFAQ\n}, {\n  path: '*',\n  redirect: '/'\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  // redirect to login page if not logged in and trying to access a restricted page\n  const publicPages = ['/login', '/register', '/', '/home'];\n  const authRequired = !publicPages.includes(to.path);\n  if (!store.getters.get_logged_status) {\n    store.commit('initialiseStore');\n  }\n  const logged_status = store.getters.get_logged_status;\n  console.log('Routing', from.path, to.path, authRequired, logged_status);\n  if (authRequired && !logged_status) {\n    alert(\"Token expired. Please log in again.\");\n    return next('/login');\n  }\n  if (authRequired && logged_status) {\n    const role = store.state.user.role;\n    if (role === 'student' && common.STUDENT_ROUTES.includes(to.path) || role === 'support' && common.SUPPORT_ROUTES.includes(to.path) || role === 'admin' && common.ADMIN_ROUTES.includes(to.path)) {\n      return next();\n    } else {\n      alert(\"You don't have access to this page.\");\n      return next(`/${role}-home`);\n    }\n  }\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","LoginView","RegisterView","store","common","StudentHome","StudentCreateTicket","StudentMyTickets","CommonFAQs","SupportHome","SupportMyTickets","AdminHome","AdminCreateFAQ","AdminValidateUsers","AppHomeView","UserProfile","use","routes","path","alias","name","component","redirect","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","publicPages","authRequired","includes","getters","get_logged_status","commit","logged_status","console","log","alert","role","state","user","STUDENT_ROUTES","SUPPORT_ROUTES","ADMIN_ROUTES"],"sources":["D:/IITM_exam/IITM_Term_7/SE_Project/Tushar_Work/code/frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport LoginView from '../views/LoginView.vue';\nimport RegisterView from '../views/RegisterView.vue';\nimport store from '../store';\nimport * as common from \"../assets/common.js\";\nimport StudentHome from '../views/StudentHome.vue';\nimport StudentCreateTicket from '../views/StudentCreateTicket.vue';\nimport StudentMyTickets from '../views/StudentMyTickets.vue';\nimport CommonFAQs from '../views/CommonFAQs.vue';\nimport SupportHome from '../views/SupportHome.vue';\nimport SupportMyTickets from '../views/SupportMyTickets.vue';\nimport AdminHome from '../views/AdminHome.vue';\nimport AdminCreateFAQ from '../views/AdminCreateFAQ.vue';\nimport AdminValidateUsers from '../views/AdminValidateUsers.vue';\nimport AppHomeView from '../views/AppHomeView.vue';\nimport UserProfile from '../views/UserProfile.vue';\n\nVue.use(VueRouter);\n\nconst routes = [\n  {\n    path: '/',\n    alias: '/home',\n    name: 'AppHomeView',\n    component: AppHomeView,\n  },\n  {\n    path: '/login',\n    name: 'LoginView',\n    component: LoginView,\n  },\n  {\n    path: '/register',\n    name: 'RegisterView',\n    component: RegisterView,\n  },\n  {\n    path: '/student-home',\n    name: 'StudentHome',\n    component: StudentHome,\n  },\n  {\n    path: '/student-create-ticket',\n    name: 'StudentCreateTicket',\n    component: StudentCreateTicket,\n  },\n  {\n    path: '/student-my-tickets',\n    name: 'StudentMyTickets',\n    component: StudentMyTickets,\n  },\n  {\n    path: '/common-faqs',\n    name: 'CommonFAQs',\n    component: CommonFAQs,\n  },\n  {\n    path: '/user-profile',\n    name: 'UserProfile',\n    component: UserProfile,\n  },\n  {\n    path: '/support-home',\n    name: 'SupportHome',\n    component: SupportHome,\n  },\n  {\n    path: '/support-my-tickets',\n    name: 'SupportMyTickets',\n    component: SupportMyTickets,\n  },\n  {\n    path: '/admin-home',\n    name: 'AdminHome',\n    component: AdminHome,\n  },\n  {\n    path: '/admin-validate-users',\n    name: 'AdminValidateUsers',\n    component: AdminValidateUsers,\n  },\n  {\n    path: '/admin-create-faq',\n    name: 'AdminCreateFAQ',\n    component: AdminCreateFAQ,\n  },\n  {\n    path: '*',\n    redirect: '/',\n  },\n];\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  // redirect to login page if not logged in and trying to access a restricted page\n  const publicPages = ['/login', '/register', '/', '/home'];\n  const authRequired = !publicPages.includes(to.path);\n  if (!store.getters.get_logged_status) {\n    store.commit('initialiseStore');\n  }\n  const logged_status = store.getters.get_logged_status;\n\n  console.log('Routing', from.path, to.path, authRequired, logged_status);\n\n  if (authRequired && !logged_status) {\n    alert(\"Token expired. Please log in again.\");\n    return next('/login');\n  }\n  if (authRequired && logged_status) {\n    const role = store.state.user.role;\n\n    if (((role === 'student') && (common.STUDENT_ROUTES.includes(to.path)))\n      || ((role === 'support') && (common.SUPPORT_ROUTES.includes(to.path)))\n      || ((role === 'admin') && (common.ADMIN_ROUTES.includes(to.path)))) {\n      return next();\n    }\n    else {\n      alert(\"You don't have access to this page.\");\n      return next(`/${role}-home`);\n    }\n  }\n  next();\n})\n\nexport default router;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}